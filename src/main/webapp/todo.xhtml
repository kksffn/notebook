<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:jsf="http://xmlns.jcp.org/jsf"    
    xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:composition template="templates/todo-template.xhtml">    
        <ui:define name="content">
            <section id="todo_main" role="main">                 
                <section  id="todo-list">
                    <h4>#{msg.listHeader}</h4>
                    <ui:repeat value ="#{todoItemBean.items}" var="item"> 
                        <article class="list-group" style="clear:both">
                            <div class="list-group-item">
                                <div>#{item.text}
                                    <aside class="aside-right">
                                        Autor: #{item.author}
                                    </aside>
                                </div> 
                                <div class="tagy">                                    
                                    Categories: #{item.getCategoriesAsString(item.categories)}
                                </div>
                                <div class="controls float-left marg">                                    
                                    #{msg.deadline}:
                                    #{item.getDateTimeLocalizedToString(item.deadline)}
                                </div> 
                                <br/>                               
                                <div class="controls float-left">      
                                    <form action="_inc/make-item-done.php" method="post">              
                                        <input name="done" type="hidden" value="3"></input>
                                        <input type="submit" class="btn-sm" value="#{msg.fulfilledButton}"></input>
                                    </form>
                                </div> 
                                <div class="controls float-right">        
                                    <a href="edit.php?id=3&amp;fulfilled=0" class="edit-link">#{msg.editLink} </a>        
                                    <a href="delete.php?id=3&amp;fulfilled=0" 
                                       class="delete-link text-muted glyphicon glyphicon-remove">x</a>
                                </div>
                            </div>
                        </article>
                      </ui:repeat> 
                </section>
                <h:form id="add-form" prependId="false"> 
                    <div ><h4>#{msg.addFormHeader}</h4></div>
                    <p class="form-group">
                        <h:inputTextarea id="todo-text" 
                                         class="form-control" 
                                         title="#{msg.todoText}" 
                                         rows="3" 
                                         p:placeholder="#{msg.todoText}" 
                                         value="#{newTodoItem.text}"
                                         required="true" 
                                         requiredMessage="#{msg.messageTodoText}"></h:inputTextarea>
                    </p>
                    <p class="form-group">
                        <h:outputLabel for="datetime" value="#{msg.deadlineLabel}:"/>
                        <input type="datetime-local" 
                               class="form-control" 
                               name="datetime" 
                               id="datetime"
                               jsf:id="datetime" 
                               jsf:value="#{newTodoItem.userInputDate}"
                               required="true" 
                               requiredMessage="#{msg.messageDeadline}">                        
                            <f:convertDateTime for="datetime" timeStyle="full" 
                                               pattern="yyyy-MM-dd'T'HH:mm"
                                               type="both"/>
                        </input>
                    </p>   
                    <p class="form-group">
                        <h:outputLabel for="author" value="#{msg.authorLabel}"/>
                        <h:selectOneMenu class="author"
                                          id="author"
                                          value ="#{newTodoItem.author}"
                                          required="true" requiredMessage="Author is required">
                            <f:selectItem itemValue="Ivo" itemLabel="Ivo"/>
                            <f:selectItem itemValue="Olinka" itemLabel="Olinka"/>
                        </h:selectOneMenu>
                    </p>
                    <p class="form-group">
                        <h:commandButton class="btn btn-sm btn-light" 
                                        value = "#{msg.addFormButton}" 
                                        action = "#{todoItemBean.createNewTask(newTodoItem)}"/>
                    </p>                    
                    <h:messages style="color: red;" layout="list"/>
                </h:form>
            </section>  
            <section id = "sidebar">               
                <p>Toto bude postrann√≠ menu...</p>
            </section>            
        </ui:define>  
    </ui:composition>
</html>

